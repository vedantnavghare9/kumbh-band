<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Kumbh Band - Hardware Simulation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
/* ================= HARDWARE-STYLED UI ================= */
:root {
  --hardware-green: #22c55e;
  --hardware-red: #ef4444;
  --hardware-yellow: #f59e0b;
  --hardware-blue: #3b82f6;
  --hardware-bg: #0f172a;
  --hardware-panel: #1e293b;
  --hardware-border: #475569;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: var(--hardware-bg);
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, sans-serif;
  line-height: 1.6;
  padding: 0;
  min-height: 100vh;
}

.container {
  max-width: 400px;
  margin: 0 auto;
  padding: 20px;
}

/* Hardware Header */
.hardware-header {
  text-align: center;
  margin-bottom: 30px;
  padding-bottom: 20px;
  border-bottom: 2px solid var(--hardware-border);
}

.hardware-title {
  font-size: 2.2rem;
  font-weight: 800;
  color: var(--hardware-green);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 8px;
  text-shadow: 0 2px 10px rgba(34, 197, 94, 0.3);
}

.hardware-subtitle {
  color: #94a3b8;
  font-size: 0.95rem;
  font-weight: 500;
}

/* Hardware Status Panel */
.hardware-status {
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 25px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.status-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.status-label {
  color: #94a3b8;
  font-size: 14px;
  font-weight: 500;
}

.status-value {
  font-size: 16px;
  font-weight: 600;
}

.status-connected {
  color: var(--hardware-green);
}

.status-disconnected {
  color: var(--hardware-red);
}

/* Hardware Distance Display */
.hardware-distance {
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 20px;
  padding: 30px;
  margin-bottom: 25px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.distance-circle {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  border: 8px solid var(--hardware-border);
  margin: 0 auto 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
}

.distance-circle::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 50%;
  opacity: 0;
  transition: opacity 0.4s;
}

.distance-circle.safe {
  border-color: var(--hardware-green);
  box-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
}

.distance-circle.safe::before {
  background: radial-gradient(circle, rgba(34, 197, 94, 0.1) 0%, transparent 70%);
  opacity: 1;
}

.distance-circle.warning {
  border-color: var(--hardware-yellow);
  box-shadow: 0 0 30px rgba(245, 158, 11, 0.3);
}

.distance-circle.warning::before {
  background: radial-gradient(circle, rgba(245, 158, 11, 0.1) 0%, transparent 70%);
  opacity: 1;
}

.distance-circle.danger {
  border-color: var(--hardware-red);
  box-shadow: 0 0 30px rgba(239, 68, 68, 0.3);
  animation: hardwarePulse 1s infinite;
}

.distance-circle.danger::before {
  background: radial-gradient(circle, rgba(239, 68, 68, 0.1) 0%, transparent 70%);
  opacity: 1;
}

.distance-value {
  font-size: 48px;
  font-weight: 800;
  color: white;
  line-height: 1;
  margin-bottom: 5px;
}

.distance-unit {
  font-size: 18px;
  color: #94a3b8;
  font-weight: 500;
}

.distance-label {
  font-size: 14px;
  color: #94a3b8;
  margin-top: 15px;
}

/* Hardware Navigation */
.hardware-navigation {
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 16px;
  padding: 25px;
  margin-bottom: 25px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.nav-title {
  color: #94a3b8;
  font-size: 14px;
  margin-bottom: 20px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.nav-arrow {
  font-size: 80px;
  margin: 15px 0;
  transition: transform 0.5s ease;
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
}

.nav-direction {
  font-size: 16px;
  font-weight: 600;
  color: var(--hardware-blue);
  margin-top: 10px;
}

/* Hardware Connection Panel */
.hardware-connection {
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 16px;
  padding: 25px;
  margin-bottom: 25px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.kid-display {
  background: rgba(15, 23, 42, 0.7);
  border: 2px solid var(--hardware-border);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 20px;
  text-align: center;
}

.kid-label {
  color: #94a3b8;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 8px;
}

.kid-value {
  font-size: 28px;
  font-weight: 800;
  color: var(--hardware-green);
  font-family: monospace;
  letter-spacing: 3px;
}

.connection-input {
  margin: 20px 0;
}

.input-label {
  display: block;
  color: #94a3b8;
  font-size: 14px;
  margin-bottom: 10px;
  font-weight: 500;
}

.hardware-input {
  width: 100%;
  padding: 15px;
  background: rgba(15, 23, 42, 0.7);
  border: 2px solid var(--hardware-border);
  border-radius: 12px;
  color: white;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  transition: all 0.3s;
}

.hardware-input:focus {
  outline: none;
  border-color: var(--hardware-blue);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

/* Hardware Controls */
.hardware-controls {
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 16px;
  padding: 25px;
  margin-bottom: 25px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.safe-range-control {
  margin-bottom: 25px;
}

.range-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.range-label {
  color: #94a3b8;
  font-size: 14px;
  font-weight: 500;
}

.range-value-display {
  font-size: 24px;
  font-weight: 800;
  color: var(--hardware-green);
}

.hardware-slider {
  width: 100%;
  height: 8px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--hardware-border);
  border-radius: 4px;
  outline: none;
}

.hardware-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: var(--hardware-green);
  border: 3px solid white;
  cursor: pointer;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.range-limits {
  display: flex;
  justify-content: space-between;
  margin-top: 10px;
  color: #94a3b8;
  font-size: 12px;
}

/* Hardware Buttons */
.hardware-buttons {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.hardware-btn {
  padding: 18px;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.btn-connect {
  background: linear-gradient(135deg, var(--hardware-green), #16a34a);
  color: white;
  box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
}

.btn-connect:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
}

.btn-connect.connected {
  background: linear-gradient(135deg, var(--hardware-red), #dc2626);
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
}

.btn-simulate {
  background: linear-gradient(135deg, var(--hardware-blue), #2563eb);
  color: white;
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.btn-simulate:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
}

/* Hardware Simulation */
.hardware-simulation {
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 16px;
  padding: 25px;
  margin-bottom: 25px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.sim-title {
  color: #94a3b8;
  font-size: 14px;
  margin-bottom: 20px;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.sim-controls {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  margin-bottom: 20px;
}

.sim-btn {
  padding: 15px;
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.sim-btn:hover {
  background: var(--hardware-border);
  transform: translateY(-2px);
}

.sim-icon {
  font-size: 24px;
}

.sim-label {
  font-size: 12px;
  color: #94a3b8;
}

.sim-status {
  text-align: center;
  padding: 15px;
  background: rgba(15, 23, 42, 0.7);
  border-radius: 12px;
  border: 2px solid var(--hardware-border);
}

.sim-status-value {
  color: var(--hardware-blue);
  font-weight: 700;
  font-size: 18px;
}

/* Hardware Footer */
.hardware-footer {
  background: var(--hardware-panel);
  border: 2px solid var(--hardware-border);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 25px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.footer-title {
  color: var(--hardware-green);
  font-size: 16px;
  margin-bottom: 15px;
  text-align: center;
  font-weight: 700;
}

.hardware-features {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
}

.feature-item {
  background: rgba(15, 23, 42, 0.7);
  border-radius: 10px;
  padding: 15px;
  text-align: center;
}

.feature-icon {
  font-size: 24px;
  margin-bottom: 10px;
  color: var(--hardware-green);
}

.feature-text {
  font-size: 12px;
  color: #94a3b8;
  line-height: 1.4;
}

/* Hardware Alert */
.hardware-alert {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--hardware-red);
  color: white;
  padding: 15px 25px;
  border-radius: 12px;
  font-weight: 700;
  box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4);
  display: none;
  z-index: 1000;
  animation: slideDown 0.3s ease;
}

/* Animations */
@keyframes hardwarePulse {
  0% { opacity: 1; }
  50% { opacity: 0.7; }
  100% { opacity: 1; }
}

@keyframes slideDown {
  from { transform: translateX(-50%) translateY(-20px); opacity: 0; }
  to { transform: translateX(-50%) translateY(0); opacity: 1; }
}

@keyframes vibrate {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

.vibrating {
  animation: vibrate 0.1s linear infinite;
}

/* Responsive */
@media (max-width: 400px) {
  .container {
    padding: 15px;
  }
  
  .hardware-title {
    font-size: 1.8rem;
  }
  
  .distance-circle {
    width: 150px;
    height: 150px;
  }
  
  .distance-value {
    font-size: 40px;
  }
  
  .sim-controls {
    grid-template-columns: 1fr;
  }
  
  .hardware-features {
    grid-template-columns: 1fr;
  }
}
</style>
</head>

<body>

<!-- Alert Notification -->
<div class="hardware-alert" id="hardwareAlert">
  ‚ö†Ô∏è OUT OF SAFE RANGE! Move closer!
</div>

<div class="container">
  <!-- Hardware Header -->
  <div class="hardware-header">
    <h1 class="hardware-title">KUMBH BAND</h1>
    <p class="hardware-subtitle">Hardware Simulation Prototype</p>
  </div>

  <!-- Hardware Status -->
  <div class="hardware-status">
    <div class="status-row">
      <span class="status-label">Device Status</span>
      <span class="status-value status-disconnected" id="deviceStatus">DISCONNECTED</span>
    </div>
    <div class="status-row">
      <span class="status-label">Battery</span>
      <span class="status-value">98%</span>
    </div>
    <div class="status-row">
      <span class="status-label">BLE Signal</span>
      <span class="status-value">--</span>
    </div>
  </div>

  <!-- Hardware Distance Display -->
  <div class="hardware-distance">
    <div class="distance-circle" id="distanceCircle">
      <div class="distance-value" id="distanceValue">--</div>
      <div class="distance-unit">meters</div>
    </div>
    <div class="distance-label">
      Distance from connected band
    </div>
  </div>

  <!-- Hardware Navigation -->
  <div class="hardware-navigation">
    <div class="nav-title">Direction to Friend</div>
    <div class="nav-arrow" id="navArrow">‚¨ÜÔ∏è</div>
    <div class="nav-direction" id="navDirection">--</div>
  </div>

  <!-- Hardware Connection -->
  <div class="hardware-connection">
    <div class="kid-display">
      <div class="kid-label">Your Band ID</div>
      <div class="kid-value" id="myKid">K-0000</div>
    </div>
    
    <div class="connection-input">
      <label class="input-label">Enter Friend's Band ID</label>
      <input type="text" class="hardware-input" id="friendKid" placeholder="e.g., K-1234" maxlength="6">
    </div>
    
    <div class="hardware-buttons">
      <button class="hardware-btn btn-connect" id="connectBtn" onclick="toggleConnection()">
        <span>üîó</span>
        <span id="connectText">CONNECT BAND</span>
      </button>
      <button class="hardware-btn btn-simulate" onclick="startSimulationMode()">
        <span>üéÆ</span>
        <span>SIMULATION MODE</span>
      </button>
    </div>
  </div>

  <!-- Hardware Controls -->
  <div class="hardware-controls">
    <div class="safe-range-control">
      <div class="range-header">
        <span class="range-label">Safe Range</span>
        <span class="range-value-display" id="safeRangeValue">50</span>
      </div>
      <input type="range" min="10" max="100" value="50" class="hardware-slider" id="safeRangeSlider" 
             oninput="updateSafeRange(this.value)">
      <div class="range-limits">
        <span>10m</span>
        <span>100m</span>
      </div>
    </div>
  </div>

  <!-- Hardware Simulation -->
  <div class="hardware-simulation">
    <div class="sim-title">Test Band Movement</div>
    
    <div class="sim-controls">
      <button class="sim-btn" onclick="simulateMovement(-5)">
        <span class="sim-icon">‚¨áÔ∏è</span>
        <span class="sim-label">5m Closer</span>
      </button>
      <button class="sim-btn" onclick="simulateMovement(5)">
        <span class="sim-icon">‚¨ÜÔ∏è</span>
        <span class="sim-label">5m Away</span>
      </button>
      <button class="sim-btn" onclick="simulateMovement(-20)">
        <span class="sim-icon">‚è¨</span>
        <span class="sim-label">20m Closer</span>
      </button>
      <button class="sim-btn" onclick="simulateMovement(20)">
        <span class="sim-icon">‚è´</span>
        <span class="sim-label">20m Away</span>
      </button>
    </div>
    
    <div class="sim-status">
      <div class="sim-label">Simulation Adjustment</div>
      <div class="sim-status-value" id="simAdjustment">0m</div>
    </div>
  </div>

  <!-- Hardware Footer -->
  <div class="hardware-footer">
    <div class="footer-title">KUMBH BAND FEATURES</div>
    <div class="hardware-features">
      <div class="feature-item">
        <div class="feature-icon">üìè</div>
        <div class="feature-text">Real-time distance between connected bands</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">üõ°Ô∏è</div>
        <div class="feature-text">Safe range alerts with vibration</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">üß≠</div>
        <div class="feature-text">Direction guidance to find friends</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">üîã</div>
        <div class="feature-text">7+ days battery life (BLE technology)</div>
      </div>
    </div>
  </div>
</div>

<script type="module">
// ================= HARDWARE SIMULATION ENGINE =================
class KumbhBandSimulator {
  constructor() {
    // Hardware State
    this.isConnected = false;
    this.isSimulationMode = false;
    this.safeRange = 50;
    this.currentDistance = 0;
    this.simulatedAdjustment = 0;
    this.myKid = '';
    this.friendKid = '';
    
    // Hardware Settings
    this.batteryLevel = 98;
    this.bleSignalStrength = 0;
    
    // DOM Elements
    this.elements = {
      distanceValue: document.getElementById('distanceValue'),
      distanceCircle: document.getElementById('distanceCircle'),
      deviceStatus: document.getElementById('deviceStatus'),
      navArrow: document.getElementById('navArrow'),
      navDirection: document.getElementById('navDirection'),
      myKid: document.getElementById('myKid'),
      friendKid: document.getElementById('friendKid'),
      safeRangeValue: document.getElementById('safeRangeValue'),
      safeRangeSlider: document.getElementById('safeRangeSlider'),
      connectBtn: document.getElementById('connectBtn'),
      connectText: document.getElementById('connectText'),
      simAdjustment: document.getElementById('simAdjustment'),
      hardwareAlert: document.getElementById('hardwareAlert')
    };
    
    // Hardware Simulation
    this.simulationInterval = null;
    this.directionInterval = null;
    this.vibrationTimeout = null;
    
    // Initialize
    this.initializeHardware();
  }
  
  // ================= HARDWARE INITIALIZATION =================
  initializeHardware() {
    // Generate or load K-ID
    this.myKid = localStorage.getItem('kumbhBandKid');
    if (!this.myKid) {
      this.myKid = 'K-' + Math.floor(1000 + Math.random() * 9000);
      localStorage.setItem('kumbhBandKid', this.myKid);
    }
    
    // Display K-ID on band
    this.elements.myKid.textContent = this.myKid;
    
    // Load saved safe range
    const savedRange = localStorage.getItem('kumbhBandSafeRange');
    if (savedRange) {
      this.safeRange = parseInt(savedRange);
      this.elements.safeRangeValue.textContent = this.safeRange;
      this.elements.safeRangeSlider.value = this.safeRange;
    }
    
    // Load saved friend ID
    const savedFriendId = localStorage.getItem('kumbhBandFriendId');
    if (savedFriendId) {
      this.elements.friendKid.value = savedFriendId;
    }
    
    // Update UI
    this.updateHardwareDisplay();
    
    // Add event listeners
    this.elements.friendKid.addEventListener('input', (e) => {
      localStorage.setItem('kumbhBandFriendId', e.target.value);
    });
    
    // Hardware button sounds simulation
    document.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        this.simulateButtonClick();
      });
    });
    
    console.log('Kumbh Band Hardware Simulator Initialized');
  }
  
  // ================= HARDWARE CONTROLS =================
  updateSafeRange(value) {
    this.safeRange = parseInt(value);
    this.elements.safeRangeValue.textContent = this.safeRange;
    localStorage.setItem('kumbhBandSafeRange', this.safeRange.toString());
    
    // Check current distance against new safe range
    if (this.currentDistance > 0) {
      this.checkSafeRange(this.currentDistance);
    }
  }
  
  toggleConnection() {
    if (this.isConnected) {
      this.disconnectBand();
    } else {
      this.connectBand();
    }
  }
  
  connectBand() {
    this.friendKid = this.elements.friendKid.value.trim().toUpperCase();
    
    if (!this.friendKid) {
      this.showAlert('Enter a Band ID to connect');
      return;
    }
    
    if (this.friendKid === this.myKid) {
      this.showAlert('Cannot connect to your own band');
      return;
    }
    
    // Validate K-ID format
    if (!this.friendKid.match(/^K-(SIM|\d{4})$/)) {
      this.showAlert('Invalid Band ID format. Use K-1234 or K-SIM');
      return;
    }
    
    // Check if simulation mode
    this.isSimulationMode = this.friendKid === 'K-SIM';
    
    if (this.isSimulationMode) {
      this.startSimulationMode();
    } else {
      this.startRealConnection();
    }
    
    this.isConnected = true;
    this.updateHardwareDisplay();
    
    // Simulate BLE connection sound
    this.simulateConnectionSound();
  }
  
  startSimulationMode() {
    this.elements.deviceStatus.textContent = 'CONNECTED (SIM)';
    this.elements.deviceStatus.className = 'status-value status-connected';
    
    // Start with random distance
    this.currentDistance = 20 + Math.random() * 30;
    this.updateDistanceDisplay(this.currentDistance);
    
    // Simulate BLE signal fluctuations
    this.simulationInterval = setInterval(() => {
      // BLE signal fluctuation simulation
      const fluctuation = (Math.random() - 0.5) * 3;
      this.currentDistance = Math.max(1, this.currentDistance + fluctuation);
      this.updateDistanceDisplay(this.currentDistance);
      
      // Update BLE signal strength
      this.bleSignalStrength = Math.floor(80 + Math.random() * 20);
      this.updateBleSignal();
    }, 1500);
    
    // Simulate direction changes
    this.directionInterval = setInterval(() => {
      this.updateDirection(Math.random() * 360);
    }, 2000);
    
    this.showAlert('Simulation Mode Active - Testing BLE behavior');
  }
  
  startRealConnection() {
    // In real hardware, this would establish BLE connection
    this.elements.deviceStatus.textContent = 'CONNECTING...';
    
    // Simulate BLE connection process
    setTimeout(() => {
      this.elements.deviceStatus.textContent = 'CONNECTED';
      this.elements.deviceStatus.className = 'status-value status-connected';
      
      // Simulate initial distance reading
      this.currentDistance = 15 + Math.random() * 40;
      this.updateDistanceDisplay(this.currentDistance);
      
      // Start distance updates
      this.simulationInterval = setInterval(() => {
        // Simulate BLE distance updates
        const fluctuation = (Math.random() - 0.5) * 2;
        this.currentDistance = Math.max(1, this.currentDistance + fluctuation);
        this.updateDistanceDisplay(this.currentDistance);
      }, 1000);
      
      this.showAlert(`Connected to ${this.friendKid}`);
    }, 1500);
  }
  
  disconnectBand() {
    // Stop all intervals
    if (this.simulationInterval) {
      clearInterval(this.simulationInterval);
      this.simulationInterval = null;
    }
    
    if (this.directionInterval) {
      clearInterval(this.directionInterval);
      this.directionInterval = null;
    }
    
    // Clear vibration timeout
    if (this.vibrationTimeout) {
      clearTimeout(this.vibrationTimeout);
    }
    
    // Reset state
    this.isConnected = false;
    this.isSimulationMode = false;
    this.simulatedAdjustment = 0;
    this.currentDistance = 0;
    this.bleSignalStrength = 0;
    
    // Reset display
    this.elements.distanceValue.textContent = '--';
    this.elements.distanceCircle.className = 'distance-circle';
    this.elements.deviceStatus.textContent = 'DISCONNECTED';
    this.elements.deviceStatus.className = 'status-value status-disconnected';
    this.elements.navArrow.textContent = '‚¨ÜÔ∏è';
    this.elements.navArrow.style.transform = 'rotate(0deg)';
    this.elements.navDirection.textContent = '--';
    this.elements.simAdjustment.textContent = '0m';
    
    this.updateHardwareDisplay();
    
    // Simulate disconnect sound
    this.simulateDisconnectSound();
  }
  
  // ================= HARDWARE SIMULATION =================
  simulateMovement(change) {
    if (!this.isConnected) {
      this.showAlert('Connect a band first');
      return;
    }
    
    // Update simulated adjustment
    this.simulatedAdjustment += change;
    this.elements.simAdjustment.textContent = `${this.simulatedAdjustment}m`;
    
    // Update current distance
    this.currentDistance = Math.max(1, this.currentDistance + change);
    this.updateDistanceDisplay(this.currentDistance);
    
    // Simulate movement effect
    this.simulateMovementEffect(change);
  }
  
  startSimulationMode() {
    if (this.isConnected) {
      this.disconnectBand();
    }
    
    // Set up simulation mode
    this.elements.friendKid.value = 'K-SIM';
    this.connectBand();
  }
  
  // ================= HARDWARE DISPLAY UPDATES =================
  updateHardwareDisplay() {
    // Update connection button
    if (this.isConnected) {
      this.elements.connectText.textContent = 'DISCONNECT BAND';
      this.elements.connectBtn.classList.add('connected');
    } else {
      this.elements.connectText.textContent = 'CONNECT BAND';
      this.elements.connectBtn.classList.remove('connected');
    }
  }
  
  updateDistanceDisplay(distance) {
    this.currentDistance = distance;
    
    // Update distance value with hardware-like animation
    this.elements.distanceValue.textContent = Math.round(distance);
    this.elements.distanceValue.style.transform = 'scale(1.1)';
    setTimeout(() => {
      this.elements.distanceValue.style.transform = 'scale(1)';
    }, 200);
    
    // Check safe range and update circle color
    this.checkSafeRange(distance);
    
    // Update battery based on usage
    this.updateBatteryUsage();
  }
  
  checkSafeRange(distance) {
    const circle = this.elements.distanceCircle;
    const roundedDistance = Math.round(distance);
    
    // Remove all classes
    circle.className = 'distance-circle';
    
    if (roundedDistance <= this.safeRange) {
      circle.classList.add('safe');
    } else if (roundedDistance <= this.safeRange * 1.5) {
      circle.classList.add('warning');
      this.triggerWarningAlert(roundedDistance);
    } else {
      circle.classList.add('danger');
      this.triggerDangerAlert(roundedDistance);
    }
  }
  
  updateDirection(bearing) {
    // Convert bearing to arrow rotation
    this.elements.navArrow.style.transform = `rotate(${bearing}deg)`;
    
    // Set direction text
    if (bearing >= 315 || bearing < 45) {
      this.elements.navArrow.textContent = '‚¨ÜÔ∏è';
      this.elements.navDirection.textContent = 'NORTH';
    } else if (bearing >= 45 && bearing < 135) {
      this.elements.navArrow.textContent = '‚û°Ô∏è';
      this.elements.navDirection.textContent = 'EAST';
    } else if (bearing >= 135 && bearing < 225) {
      this.elements.navArrow.textContent = '‚¨áÔ∏è';
      this.elements.navDirection.textContent = 'SOUTH';
    } else {
      this.elements.navArrow.textContent = '‚¨ÖÔ∏è';
      this.elements.navDirection.textContent = 'WEST';
    }
  }
  
  updateBleSignal() {
    // This would update BLE signal strength display
    // For now, just log it
    console.log(`BLE Signal: ${this.bleSignalStrength}%`);
  }
  
  updateBatteryUsage() {
    // Simulate battery drain based on usage
    if (this.isConnected) {
      this.batteryLevel = Math.max(10, this.batteryLevel - 0.01);
    }
  }
  
  // ================= HARDWARE ALERTS & FEEDBACK =================
  triggerWarningAlert(distance) {
    this.showAlert(`Approaching safe limit: ${distance}m`);
    this.simulateVibration([100, 50, 100]);
  }
  
  triggerDangerAlert(distance) {
    this.showAlert(`OUT OF SAFE RANGE! ${distance}m away`);
    this.simulateVibration([200, 100, 200, 100, 200]);
    
    // Make the whole circle vibrate
    this.elements.distanceCircle.classList.add('vibrating');
    setTimeout(() => {
      this.elements.distanceCircle.classList.remove('vibrating');
    }, 1000);
  }
  
  showAlert(message) {
    const alert = this.elements.hardwareAlert;
    alert.textContent = message;
    alert.style.display = 'block';
    
    setTimeout(() => {
      alert.style.display = 'none';
    }, 3000);
  }
  
  simulateVibration(pattern) {
    // Simulate hardware vibration
    if (navigator.vibrate) {
      navigator.vibrate(pattern);
    }
    
    // Visual vibration feedback
    document.body.style.transform = 'translateX(2px)';
    setTimeout(() => {
      document.body.style.transform = 'translateX(-2px)';
      setTimeout(() => {
        document.body.style.transform = 'translateX(0)';
      }, 50);
    }, 50);
  }
  
  simulateButtonClick() {
    // Simulate hardware button click sound/feedback
    document.body.style.transform = 'scale(0.99)';
    setTimeout(() => {
      document.body.style.transform = 'scale(1)';
    }, 100);
  }
  
  simulateConnectionSound() {
    // Simulate BLE connection sound
    console.log('üîä BLE Connected: Beep-beep!');
  }
  
  simulateDisconnectSound() {
    // Simulate BLE disconnect sound
    console.log('üîä BLE Disconnected: Boop!
